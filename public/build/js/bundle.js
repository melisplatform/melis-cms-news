function renderNewsWorkFlowModal(e,t){$.ajax({url:"/melis/MelisSmallBusiness/MelisWorkflow/render-workflow-modal",encode:!0}).done((function(s){$("#melis-modals-container").append(s),$("#melis-modals-container").find(".modal-content").data(e);var i=$(s).find(".modal").attr("id");melisHelper.zoneReload("id_melissb_workflow_modal_content","melissb_workflow_modal_content",e),$("#"+i).modal({show:!0}),melisCoreTool.done(t)})).fail((function(e,s,i){melisCoreTool.done(t),alert(translations.tr_meliscore_error_message)}));var s=setInterval((function(){$commentBtn=$("#melis-modals-container").find(".btnAddWorkflowComment"),$commentBtn.length&&($commentBtn.removeClass(),$commentBtn.addClass("btn btn-success pull-right btnAddWorkflowCommentNews"),$("#melis-modals-container").find(".btnAddWorkflowCommentNews").length&&clearInterval(s)),$noCommentBtn=$("#melis-modals-container").find(".btnCommentModalClose"),$noCommentBtn.length&&($noCommentBtn.removeClass(),$noCommentBtn.addClass("btn btn-success pull-right btnCommentModalCloseNews"),$("#melis-modals-container").find(".btnCommentModalCloseNews").length&&clearInterval(s))}),300)}function charCounter(e){var t=$(this).val().length,s=$(this).prev("label"),i=e.data.limit;s.find("span").length?0===t?(s.removeClass("limit"),s.find("span").remove()):(s.find("span").html('<i class="fa fa-text-width"></i>('+t+")"),t>i?(s.addClass("limit"),s.find("span").addClass("limit")):(s.removeClass("limit"),s.find("span").removeClass("limit"))):0!==t&&(s.find(".label-text").append("<span class='text-counter-indicator'><i class='fa fa-text-width'></i>("+t+")</span>"),t>i&&(s.addClass("limit"),s.find("span").addClass("limit")))}$((function(){var e=$("body"),t="ask",s=0;e.on("click",".addNews",(function(){var e=translations.tr_meliscmsnews_list_header_title_new;toolNews.tabOpen(e,0)})),e.on("click",".newsEdit",(function(){let e=$(this),t=e.closest("tr").attr("id"),s=e.closest("tr").find("td:nth-child(3)").text();toolNews.tabOpen(s,t)})),e.on("click",".newsListRefresh",(function(){toolNews.refreshTable()})),e.on("click",".newsDelete",(function(){var e=$(this).closest("tr").attr("id"),t=[];t.push({name:"newsId",value:e}),melisCoreTool.pending(".newsDelete"),melisCoreTool.confirm(translations.tr_meliscmsnews_common_label_yes,translations.tr_meliscmsnews_common_label_no,translations.tr_meliscmsnews_common_label_delete_news,translations.tr_meliscmsnews_common_label_delete_confirm,(function(){$.ajax({type:"POST",url:"/melis/MelisCmsNews/MelisCmsNewsList/deleteNews",data:t,dataType:"json",encode:!0}).done((function(t){t.success?(melisHelper.melisOkNotification(t.textTitle,t.textMessage),toolNews.tabClose(e),melisHelper.zoneReload("id_meliscmsnews_list_content_table","meliscmsnews_list_content_table",{})):melisHelper.melisKoNotification(t.textTitle,t.textMessage,t.errors),melisCore.flashMessenger()})).fail((function(){alert(translations.tr_meliscore_error_message)}))})),melisCoreTool.done(".newsDelete")})),e.on("click",".removeAttachFile",(function(){var e=$(this),t=e.data("newsid"),s=e.data("column"),i=e.data("type"),n=[];n.push({name:"newsId",value:t}),n.push({name:"column",value:s}),n.push({name:"type",value:i}),melisCoreTool.pending(".removeAttachFile"),melisCoreTool.confirm(translations.tr_meliscmsnews_common_label_yes,translations.tr_meliscmsnews_common_label_no,melisHelper.melisTranslator("tr_meliscmsnews_delete_"+i+"_title"),melisHelper.melisTranslator("tr_meliscmsnews_delete_"+i+"_confirm_msg"),(function(){$.ajax({type:"POST",url:"/melis/MelisCmsNews/MelisCmsNews/removeAttachFile",data:n,dataType:"json",encode:!0}).done((function(e){e.success?(melisHelper.melisOkNotification(e.textTitle,e.textMessage),melisHelper.zoneReload(t+"_id_meliscmsnews_content_tabs_properties_details_left_images","meliscmsnews_content_tabs_properties_details_left_images",{newsId:t}),melisHelper.zoneReload(t+"_id_meliscmsnews_content_tabs_properties_details_left_documents","meliscmsnews_content_tabs_properties_details_left_documents",{newsId:t})):melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors),melisCore.flashMessenger()})).fail((function(){alert(translations.tr_meliscore_error_message)}))})),melisCoreTool.done(".removeAttachFile")})),e.on("keyup","#cnews_title",(function(){var e=$(this).closest(".container-level-a").data("newsid"),t=$(this).val(),s=($("#"+e+"_id_meliscmsnews_content_tabs_properties_details_right_paragraphs .news-post-text-form"),$("#"+e+"_id_meliscmsnews_content_tabs_properties_details_right_paragraphs").find("li.active a").attr("data-lang-id"));$("#"+e+"_id_meliscmsnews_content_tabs_seo_details #cnews_"+s).find("#cnews_seo_url").val();""==$("#"+e+"_id_meliscmsnews_content_tabs_seo_details #cnews_"+s).find('input[name="cnews_seo_id"]').val()&&$("#"+e+"_id_meliscmsnews_content_tabs_seo_details #cnews_"+s).find("#cnews_seo_url").val(t.replace(/\s+/g,"-").replace(/[^a-z0-9]+/gi,"-").replace(/^-+/,"").replace(/-+$/,"").toLowerCase())})),e.on("click",".saveNewsLetter",(function(){var t=$(this);if(void 0===t.attr("disabled")){melisCoreTool.pending(".saveNewsLetter");var s=t.closest(".container-level-a"),i=s.find("form#newsLetterForm").serializeArray(),n=s.data("newsid"),o=s.find("select[name=cnews_slider_id]").val(),a=s.find("select[name=cnews_site_id]").val(),l=$("#"+n+"_id_meliscmsnews_content_tabs_properties_details_right_paragraphs .news-post-text-form"),r=0;l.each((function(){var e=$(this);i.push({name:"cnews_title["+r+"]",value:e.find("#cnews_title").val()}),i.push({name:"cnews_subtitle["+r+"]",value:e.find("#cnews_subtitle").val()}),i.push({name:"cnews_lang_id["+r+"]",value:e.data("langId")});for(var t=1;t<=10;t++)i.push({name:"cnews_paragraph"+t+"["+r+"]",value:e.find("textarea[name='cnews_paragraph"+t+"']").val()});var s="";e.find("textarea.editme").each((function(){s=""!=s?s+"-"+$(this).attr("name"):$(this).attr("name")})),i.push({name:"cnews_paragraph_order["+r+"]",value:s}),r++})),$("#"+n+"_id_meliscmsnews_content_tabs_seo_details .news-seo-form").each((function(e,t){var s=$(this).find("form").attr("name"),n=($("form[name="+s+"]").length,new FormData($(this).find("form")[0]).entries());for(var o of n)i.push({name:"cnews_seo["+e+"]["+o[0]+"]",value:o[1]})})),i.push({name:"formCount",value:l.length}),s.find(".make-switch div").each((function(){var e=$(this),t=e.find("input").attr("name"),s=e.hasClass("switch-on")?1:0;i.push({name:t,value:s})})),i.push({name:"cnews_slider_id",value:o}),i.push({name:"cnews_site_id",value:a}),$.ajax({type:"POST",url:"/melis/MelisCmsNews/MelisCmsNews/saveNewsLetter",data:i,dataType:"json",encode:!0}).done((function(t){if(t.success)toolNews.tabClose(n),melisHelper.melisOkNotification(t.textTitle,t.textMessage),toolNews.tabOpen(t.chunk.cnews_title,t.chunk.cnews_id),toolNews.refreshTable();else{if(melisHelper.melisKoNotification(t.textTitle,t.textMessage,t.errors),melisCoreTool.highlightErrors(t.success,t.errors,t.chunk.cnews_id+"_id_meliscmsnews_page form"),t.errors.hasOwnProperty("cnews_title")){var s=e.find("#"+t.chunk.cnews_id+"_id_meliscmsnews_content_tabs_properties_details_right_paragraphs label[for='cnews_title']");s.length&&s.css("color","red")}for(var i=["cnews_seo_meta_title","cnews_seo_meta_description","cnews_seo_canonical","cnews_seo_url","cnews_seo_url_redirect","cnews_seo_url_301"],o=i.length,a=0;a<o;a++)if(t.errors[i[a]]){var l=t.errors[i[a]].label,r=l.substring(l.indexOf("(")+1,l.lastIndexOf(")")),c=$("#"+n+"_id_meliscmsnews_content_tabs_seo_details").find("span:contains("+r+")").parent("a").attr("href");$("#"+t.chunk.cnews_id+"_id_meliscmsnews_content_tabs_seo_details .form-control[name="+i[a]+"]").parents(".form-group").children(":first").css("color","#686868"),$(c+" .form-control[name='"+i[a]+"']").parents(".form-group").children(":first").css("color","red")}}melisCore.flashMessenger(),melisCoreTool.done(".saveNewsLetter")}))}})),e.on("click",".newsAttachFile",(function(){melisCoreTool.pending(".newsAttachFile");var e=$(this),t=e.data("newsid"),s=e.data("filetype");melisHelper.createModal("id_meliscmsnews_modal_documents_form","meliscmsnews_modal_documents_form",!1,{newsId:t,type:s,isNew:1},"/melis/MelisCmsNews/MelisCmsNews/renderModal",(function(){melisCoreTool.done(".newsAttachFile")}))})),e.on("click",".newsAttachImage",(function(){melisCoreTool.pending(".newsAttachImage");var e=$(this),t=e.data("newsid"),s=e.data("filetype");melisHelper.createModal("id_meliscmsnews_modal_documents_form_image","meliscmsnews_modal_documents_form_image",!1,{newsId:t,type:s,isNew:1},"/melis/MelisCmsNews/MelisCmsNews/renderModal",(function(){melisCoreTool.done(".newsAttachImage")}))})),e.on("click",".newsEditImage",(function(){melisCoreTool.pending(".newsAttachImage");var e=$(this),t=e.data("newsid"),s=e.data("filetype"),i=e.data("column");melisHelper.createModal("id_meliscmsnews_modal_documents_form_image","meliscmsnews_modal_documents_form_image",!1,{newsId:t,type:s,isNew:0,column:i},"/melis/MelisCmsNews/MelisCmsNews/renderModal",(function(){melisCoreTool.done(".newsAttachImage")}))})),e.on("click","#newsAttachment",(function(){var e=$(this);melisCoreTool.pending(e);var t=$("#newsFileForm").get(0),s=new FormData(t);$.ajax({type:"POST",url:"/melis/MelisCmsNews/MelisCmsNews/saveFileForm",data:s,dataType:"json",processData:!1,cache:!1,contentType:!1,encode:!0,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",toolNews.progress,!1),e}}).done((function(t){t.success?("image"===t.chunk.type?toolNews.imageModal(t.chunk):toolNews.fileModal(t.chunk),melisHelper.melisOkNotification(t.textTitle,t.textMessage,"#72af46"),melisCore.flashMessenger()):melisHelper.melisKoNotification(t.textTitle,t.textMessage,t.errors,"closeByButtonOnly"),$("div.progressContent").addClass("hidden"),melisCoreTool.done(e)})).fail((function(t,s){alert(translations.tr_meliscore_error_message),melisCoreTool.done(e)}))})),e.on("change","select[name=cnews_site_id]",(function(){var e=$(this).parents().eq(6).find("table").attr("id");$("#"+e).DataTable().ajax.reload()})),e.on("change",".mcnews-page-details",(function(){var t=$(this),s=this.value,i=t.data();if(void 0!==i.newsId&&i.newsId>0&&void 0!==i.nameSpace.length&&i.nameSpace.length>0&&void 0!==s&&s>0){var n="/id/"+s+"/preview?melisSite="+i.nameSpace+"&newsId="+i.newsId+"&renderMode=previewtab",o=e.find("#"+i.newsId+"-see-below"),a=e.find("#"+i.newsId+"-see-in-new-tab");o.attr({"data-uri":n,disabled:!1}),a.attr({href:n,disabled:!1})}})),e.on("click",".preview-tab-see-below",(function(){var e=this.id,t=this.dataset;void 0!==t.uri&&t.uri&&(e=e.split("-")[0])&&melisHelper.zoneReload(e+"_id_meliscmsnews_tabs_preview_iframe","meliscmsnews_tabs_preview_iframe",{newsId:e,newsUri:t.uri})})),e.on("click",".comments",(function(){var e=$(this).attr("href"),t=$(e);melisCore.screenSize>768&&t.find(".comments-table-refresh").trigger("click")})),$(window).on("scroll",(function(){var e=activeTabId.split("_")[0],t=$("#"+e+"_news-preview-iframe-container");if(!0===t.is(":visible")){var s=t.find("iframe"),i=s.height();0===t.find(".overlay-loader").length&&i<=800&&s.height(s.contents().height())}})),e.on("keyup keydown change","form[name='newsSeoForm'] input[name='cnews_seo_meta_title']",{limit:65},charCounter),e.on("keyup keydown change","form[name='newsSeoForm'] textarea[name='cnews_seo_meta_description']",{limit:255},charCounter),e.on("click",".news-details-workflow",(function(){t="ask";var e=$(this);if(null==e.attr("disabled")){var i=e.data();melisCoreTool.pending(".news-details-workflow"),s=i.wfId,renderNewsWorkFlowModal(i,".news-details-workflow")}})),e.on("click",".news-workflow",(function(){t="ask";var e=$(this);if(null==e.attr("disabled")){melisCoreTool.pending(".news-workflow");var i=e.closest("tr"),n=i.attr("id");s=n;var o=i.find("td:eq(2)").text();renderNewsWorkFlowModal({wfDetails:o+" ("+n+")",wfId:n,wfOpeningJs:"melisHelper.tabOpen('"+o+"', 'fa fa-rss fa-2x',  '"+n+"_id_meliscmsnews_page', 'meliscmsnews_page', { newsId: "+n+" });",wfType:"NEWS"},".news-workflow")}})),e.on("click",".workflow-modal-cont .btn-validate-refuse",(function(){t=$(this).hasClass("pw-validate")?"validate":"refuse"})),e.on("click",".btnAddWorkflowCommentNews, .btnCommentModalCloseNews",(function(e){var i=s,n="workflow-comments-modal form#idmelissbpagecomments",o=t;$(this).hasClass("btnAddWorkflowCommentNews")||$("#id_pcom_text").val("");var a=$("#"+n).serializeArray();a.push({name:"pcom_news_id",value:i}),a.push({name:"action",value:o}),a=$.param(a),melisCoreTool.pending(".btnAddWorkflowCommentNews"),$.ajax({type:"POST",url:"/melis/MelisSmallBusiness/MelisWorkflow/addWorkflowComments",data:a,dataType:"json",encode:!0}).done((function(e){e.success?(melisHelper.zoneReload(i+"_id_meliscmsnews_center_workflow_tabs_comments_timeline","meliscmsnews_workflow_comments_timeline",{newsId:i}),melisCoreTool.clearForm(n),$("#workflowCommentModal").modal("hide"),$("#pageWorkflowModal").modal("hide")):(melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors,0),melisCoreTool.highlightErrors(e.success,e.errors,n)),melisCore.flashMessenger(),melisCoreTool.done(".btnAddWorkflowCommentNews")})).fail((function(){alert(translations.tr_meliscore_error_message)}))})),e.on("click",".btnAddNewsComment",(function(e){var t=$(this),s=t.data("newsid"),i=s+"_id_meliscmsnews_center_page_tabs_comments_add form#idmelissbpagecomments",n=$("#"+i).serializeArray();n.push({name:"pcom_news_id",value:s}),n=$.param(n),t.attr("disabled",!0),$.ajax({type:"POST",url:"/melis/MelisSmallBusiness/PageComments/addComment",data:n,dataType:"json",encode:!0}).done((function(e){e.success?(melisHelper.zoneReload(s+"_id_meliscmsnews_center_workflow_tabs_comments_timeline","meliscmsnews_workflow_comments_timeline",{newsId:s}),melisCoreTool.clearForm(i)):(melisHelper.melisKoNotification(e.textTitle,e.textMessage,e.errors),melisCoreTool.highlightErrors(e.success,e.errors,i)),melisCore.flashMessenger()})).fail((function(){alert(translations.tr_meliscore_error_message)}))}))}));var toolNews={refreshTable:function(){melisHelper.zoneReload("id_meliscmsnews_list_content_table","meliscmsnews_list_content_table",{})},tabOpen:function(e,t){melisHelper.tabOpen(e,"fa fa-list-alt",t+"_id_meliscmsnews_page","meliscmsnews_page",{newsId:t},"id_meliscmsnews_left_menu")},tabClose:function(e){melisHelper.tabClose(e+"_id_meliscmsnews_page")},imageModal:function(e){$("#id_meliscmsnews_modal_documents_form_image_container").modal("hide"),melisHelper.zoneReload(e.cnews_id+"_id_meliscmsnews_content_tabs_properties_details_left_images","meliscmsnews_content_tabs_properties_details_left_images",{newsId:e.cnews_id})},fileModal:function(e){$("#id_meliscmsnews_modal_documents_form_image_container").modal("hide"),$("#id_meliscmsnews_modal_documents_form_container").modal("hide"),melisHelper.zoneReload(e.cnews_id+"_id_meliscmsnews_content_tabs_properties_details_left_documents","meliscmsnews_content_tabs_properties_details_left_documents",{newsId:e.cnews_id})},trimLength:function(e){return(e=$.trim(e)).length>15?(e=e.substring(0,12)).substring(0,e.lastIndexOf(" "))+"...":e},progress:function(e){var t=$("div.progressContent");t.removeClass("hidden");var s=$("div.progressContent > div.progress > div.progress-bar");s.attr("aria-valuenow",0),s.css("width","0%");var i=$("div.progressContent > div.progress > span.status");if(i.html(""),e.lengthComputable){var n=e.total,o=100*e.loaded/n;s.attr("aria-valuenow",o),s.css("width",o+"%"),o>100?t.addClass("hidden"):i.html(Math.round(o)+"%")}}};window.newsImagePreview=function(e,t){if(t.files&&t.files[0]){var s=new FileReader;s.onload=function(t){$(e).attr("src",t.target.result)},s.readAsDataURL(t.files[0])}},window.initNewsList=function(e){var t=$("#newsSiteSelect");t.length&&(e.cnews_site_id=t.val())},function(e,t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("undefined"!=typeof exports)t(require("jquery"));else{t(e.jquery),e.bootstrapSwitch={}}}(this,(function(e){"use strict";var t,s=(t=e)&&t.__esModule?t:{default:t};var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e};var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),o=s.default||window.jQuery||window.$;function a(){return{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")}}function l(){var e=this,t=this.$on.add(this.$off).add(this.$label).css("width",""),s="auto"===this.options.handleWidth?Math.round(Math.max(this.$on.width(),this.$off.width())):this.options.handleWidth;return t.width(s),this.$label.width((function(t,i){return"auto"!==e.options.labelWidth?e.options.labelWidth:i<s?s:i})),this.privateHandleWidth=this.$on.outerWidth(),this.privateLabelWidth=this.$label.outerWidth(),this.$container.width(2*this.privateHandleWidth+this.privateLabelWidth),this.$wrapper.width(this.privateHandleWidth+this.privateLabelWidth)}function r(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.ope;this.$container.css("margin-left",(function(){var s=[0,"-"+e.privateHandleWidth+"px"];return e.options.indeterminate?"-"+e.privateHandleWidth/2+"px":t?e.options.inverse?s[1]:s[0]:e.options.inverse?s[0]:s[1]}))}function c(e){return this.options.baseClass+"-"+e}function d(){var e=this,t=function(){e.setPrevOptions(),l.call(e),r.call(e),setTimeout((function(){return e.options.animate&&e.$wrapper.addClass(c.call(e,"animate"))}),50)};if(this.$wrapper.is(":visible"))t();else var s=window.setInterval((function(){return e.$wrapper.is(":visible")&&(t()||!0)&&window.clearInterval(s)}),50)}function m(){var e=this;return this.$element.on({"setPreviousOptions.bootstrapSwitch":function(){return e.setPrevOptions()},"previousState.bootstrapSwitch":function(){e.options=e.prevOptions,e.options.indeterminate&&e.$wrapper.addClass(c.call(e,"indeterminate")),e.$element.prop("checked",e.options.state).trigger("change.bootstrapSwitch",!0)},"change.bootstrapSwitch":function(t,s){t.preventDefault(),t.stopImmediatePropagation();var i=e.$element.is(":checked");r.call(e,i),i!==e.options.state&&(e.options.state=i,e.$wrapper.toggleClass(c.call(e,"off")).toggleClass(c.call(e,"on")),s||(e.$element.is(":radio")&&o('[name="'+e.$element.attr("name")+'"]').not(e.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),e.$element.trigger("switchChange.bootstrapSwitch",[i])))},"focus.bootstrapSwitch":function(t){t.preventDefault(),e.$wrapper.addClass(c.call(e,"focused"))},"blur.bootstrapSwitch":function(t){t.preventDefault(),e.$wrapper.removeClass(c.call(e,"focused"))},"keydown.bootstrapSwitch":function(t){!t.which||e.options.disabled||e.options.readonly||37!==t.which&&39!==t.which||(t.preventDefault(),t.stopImmediatePropagation(),e.state(39===t.which))}})}function h(){var e=this;return this.$on.on("click.bootstrapSwitch",(function(t){return t.preventDefault(),t.stopPropagation(),e.state(!1),e.$element.trigger("focus.bootstrapSwitch")})),this.$off.on("click.bootstrapSwitch",(function(t){return t.preventDefault(),t.stopPropagation(),e.state(!0),e.$element.trigger("focus.bootstrapSwitch")}))}function p(){var e=this,t=void 0,s=void 0,i={click:function(e){e.stopPropagation()},"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(s){t||e.options.disabled||e.options.readonly||(s.preventDefault(),s.stopPropagation(),t=(s.pageX||s.originalEvent.touches[0].pageX)-parseInt(e.$container.css("margin-left"),10),e.options.animate&&e.$wrapper.removeClass(c.call(e,"animate")),e.$element.trigger("focus.bootstrapSwitch"))},"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(i){if(null!=t){var n=(i.pageX||i.originalEvent.touches[0].pageX)-t;i.preventDefault(),n<-e.privateHandleWidth||n>0||(s=n,e.$container.css("margin-left",s+"px"))}},"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(i){if(t){if(i.preventDefault(),e.options.animate&&e.$wrapper.addClass(c.call(e,"animate")),s){var n=s>-e.privateHandleWidth/2;s=!1,e.state(e.options.inverse?!n:n)}else e.state(!e.options.state);t=!1}},"mouseleave.bootstrapSwitch":function(){e.$label.trigger("mouseup.bootstrapSwitch")}};this.$label.on(i)}function f(){var e=this,t=this.$element.closest("label");t.on("click",(function(s){s.preventDefault(),s.stopImmediatePropagation(),s.target===t[0]&&e.toggleState()}))}function u(){function e(){return o(this).data("bootstrap-switch")}function t(){return o(this).bootstrapSwitch("state",this.checked)}var s=this.$element.closest("form");s.data("bootstrap-switch")||s.on("reset.bootstrapSwitch",(function(){window.setTimeout((function(){s.find("input").filter(e).each(t)}),1)})).data("bootstrap-switch",!0)}function w(e){var t=this;return Array.isArray(e)?e.map((function(e){return c.call(t,e)})):[c.call(this,e)]}var _=function(){function e(t){var s=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$element=o(t),this.options=o.extend({},o.fn.bootstrapSwitch.defaults,a.call(this),i),this.prevOptions={},this.$wrapper=o("<div>",{class:function(){return function(e,t){return[e.state?"on":"off",e.size,e.disabled?"disabled":void 0,e.readonly?"readonly":void 0,e.indeterminate?"indeterminate":void 0,e.inverse?"inverse":void 0,t?"id-"+t:void 0].filter((function(e){return null==e}))}(s.options,s.$element.attr("id")).map((function(e){return c.call(s,e)})).concat([s.options.baseClass],w.call(s,s.options.wrapperClass)).join(" ")}}),this.$container=o("<div>",{class:c.call(this,"container")}),this.$on=o("<span>",{html:this.options.onText,class:c.call(this,"handle-on")+" "+c.call(this,this.options.onColor)}),this.$off=o("<span>",{html:this.options.offText,class:c.call(this,"handle-off")+" "+c.call(this,this.options.offColor)}),this.$label=o("<span>",{html:this.options.labelText,class:c.call(this,"label")}),this.$element.on("init.bootstrapSwitch",(function(){return s.options.onInit(t)})),this.$element.on("switchChange.bootstrapSwitch",(function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];!1===s.options.onSwitchChange.apply(t,i)&&(s.$element.is(":radio")?o('[name="'+s.$element.attr("name")+'"]').trigger("previousState.bootstrapSwitch",!0):s.$element.trigger("previousState.bootstrapSwitch",!0))})),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),d.call(this),m.call(this),h.call(this),p.call(this),u.call(this),f.call(this),this.$element.trigger("init.bootstrapSwitch",this.options.state)}return n(e,[{key:"setPrevOptions",value:function(){this.prevOptions=i({},this.options)}},{key:"state",value:function(e,t){return void 0===e?this.options.state:(this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")||(this.$element.is(":radio")?o('[name="'+this.$element.attr("name")+'"]').trigger("setPreviousOptions.bootstrapSwitch"):this.$element.trigger("setPreviousOptions.bootstrapSwitch"),this.options.indeterminate&&this.indeterminate(!1),this.$element.prop("checked",Boolean(e)).trigger("change.bootstrapSwitch",t)),this.$element)}},{key:"toggleState",value:function(e){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",e)}},{key:"size",value:function(e){return void 0===e?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(c.call(this,this.options.size)),e&&this.$wrapper.addClass(c.call(this,e)),l.call(this),r.call(this),this.options.size=e,this.$element)}},{key:"animate",value:function(e){return void 0===e?this.options.animate:this.options.animate===Boolean(e)?this.$element:this.toggleAnimate()}},{key:"toggleAnimate",value:function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(c.call(this,"animate")),this.$element}},{key:"disabled",value:function(e){return void 0===e?this.options.disabled:this.options.disabled===Boolean(e)?this.$element:this.toggleDisabled()}},{key:"toggleDisabled",value:function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(c.call(this,"disabled")),this.$element}},{key:"readonly",value:function(e){return void 0===e?this.options.readonly:this.options.readonly===Boolean(e)?this.$element:this.toggleReadonly()}},{key:"toggleReadonly",value:function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(c.call(this,"readonly")),this.$element}},{key:"indeterminate",value:function(e){return void 0===e?this.options.indeterminate:this.options.indeterminate===Boolean(e)?this.$element:this.toggleIndeterminate()}},{key:"toggleIndeterminate",value:function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(c.call(this,"indeterminate")),r.call(this),this.$element}},{key:"inverse",value:function(e){return void 0===e?this.options.inverse:this.options.inverse===Boolean(e)?this.$element:this.toggleInverse()}},{key:"toggleInverse",value:function(){this.$wrapper.toggleClass(c.call(this,"inverse"));var e=this.$on.clone(!0),t=this.$off.clone(!0);return this.$on.replaceWith(t),this.$off.replaceWith(e),this.$on=t,this.$off=e,this.options.inverse=!this.options.inverse,this.$element}},{key:"onColor",value:function(e){return void 0===e?this.options.onColor:(this.options.onColor&&this.$on.removeClass(c.call(this,this.options.onColor)),this.$on.addClass(c.call(this,e)),this.options.onColor=e,this.$element)}},{key:"offColor",value:function(e){return void 0===e?this.options.offColor:(this.options.offColor&&this.$off.removeClass(c.call(this,this.options.offColor)),this.$off.addClass(c.call(this,e)),this.options.offColor=e,this.$element)}},{key:"onText",value:function(e){return void 0===e?this.options.onText:(this.$on.html(e),l.call(this),r.call(this),this.options.onText=e,this.$element)}},{key:"offText",value:function(e){return void 0===e?this.options.offText:(this.$off.html(e),l.call(this),r.call(this),this.options.offText=e,this.$element)}},{key:"labelText",value:function(e){return void 0===e?this.options.labelText:(this.$label.html(e),l.call(this),this.options.labelText=e,this.$element)}},{key:"handleWidth",value:function(e){return void 0===e?this.options.handleWidth:(this.options.handleWidth=e,l.call(this),r.call(this),this.$element)}},{key:"labelWidth",value:function(e){return void 0===e?this.options.labelWidth:(this.options.labelWidth=e,l.call(this),r.call(this),this.$element)}},{key:"baseClass",value:function(){return this.options.baseClass}},{key:"wrapperClass",value:function(e){if(void 0===e)return this.options.wrapperClass;var t=e||o.fn.bootstrapSwitch.defaults.wrapperClass;return this.$wrapper.removeClass(w.call(this,this.options.wrapperClass).join(" ")),this.$wrapper.addClass(w.call(this,t).join(" ")),this.options.wrapperClass=t,this.$element}},{key:"radioAllOff",value:function(e){if(void 0===e)return this.options.radioAllOff;var t=Boolean(e);return this.options.radioAllOff===t||(this.options.radioAllOff=t),this.$element}},{key:"onInit",value:function(e){return void 0===e?this.options.onInit:(this.options.onInit=e||o.fn.bootstrapSwitch.defaults.onInit,this.$element)}},{key:"onSwitchChange",value:function(e){return void 0===e?this.options.onSwitchChange:(this.options.onSwitchChange=e||o.fn.bootstrapSwitch.defaults.onSwitchChange,this.$element)}},{key:"destroy",value:function(){var e=this.$element.closest("form");return e.length&&e.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element}}]),e}();o.fn.bootstrapSwitch=function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return Array.prototype.reduce.call(this,(function(t,i){var n=o(i),a=n.data("bootstrap-switch"),l=a||new _(i,e);return a||n.data("bootstrap-switch",l),"string"==typeof e?l[e].apply(l,s):t}),this)},o.fn.bootstrapSwitch.Constructor=_,o.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}));
